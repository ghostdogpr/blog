<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Astro v5.13.7"><!-- Favicons --><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="apple-mobile-web-app-title" content="Pierre Ricadat's Tech Blog"><!-- Canonical URL --><link rel="canonical" href="https://blog.pierre-ricadat.com/idiomatic-dependency-injection-for-zio-applications-in-scala/"><!-- Primary Meta Tags --><title>Idiomatic dependency injection for ZIO applications in Scala</title><meta name="title" content="Idiomatic dependency injection for ZIO applications in Scala"><meta name="description" content="I often hear online in Scala-related discussions that ZLayer is &#34;too complex&#34; or &#34;unnecessary&#34;. Those statements couldn’t be more different from my own exper...
"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog.pierre-ricadat.com/idiomatic-dependency-injection-for-zio-applications-in-scala/"><meta property="og:title" content="Idiomatic dependency injection for ZIO applications in Scala"><meta property="og:description" content="I often hear online in Scala-related discussions that ZLayer is &#34;too complex&#34; or &#34;unnecessary&#34;. Those statements couldn’t be more different from my own exper...
"><meta property="og:image" content="https://blog.pierre-ricadat.com/saral-og.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog.pierre-ricadat.com/idiomatic-dependency-injection-for-zio-applications-in-scala/"><meta property="twitter:title" content="Idiomatic dependency injection for ZIO applications in Scala"><meta property="twitter:description" content="I often hear online in Scala-related discussions that ZLayer is &#34;too complex&#34; or &#34;unnecessary&#34;. Those statements couldn’t be more different from my own exper...
"><meta property="twitter:image" content="https://blog.pierre-ricadat.com/saral-og.jpg"><!-- RSS Auto-discovery --><link rel="alternate" type="application/rss+xml" title="Pierre Ricadat's Tech Blog RSS Feed" href="https://blog.pierre-ricadat.com/rss.xml"><link rel="stylesheet" href="/_astro/_slug_.DSRIcTml.css"><script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.11.2 - MIT QwikDev */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,l,d,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(d=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(l=setTimeout(v,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<d.length;n++)(o=r.createElement("script")).innerHTML=d[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(l)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script></head> <body class="text-foreground bg-background font-light dark:text-foreground-dark dark:bg-background-dark transition-colors"> <header class="fixed top-0 w-full z-40 bg-background dark:bg-background-dark"> <nav class=""> <div class="app-container flex justify-between items-center py-5"> <a href="/" aria-label="Home"> <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
  <rect width="36" height="36" rx="8" fill="currentColor" opacity="0.1" />
  <text x="18" y="25" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="700" fill="currentColor" text-anchor="middle">PR</text>
</svg> </a> <div class="gap-8 hidden md:flex items-center"> <a href="/" class="text-lg" target="_self" data-astro-cid-rieiwi5x> Blog </a> <a href="https://github.com/sponsors/ghostdogpr" class="text-lg" target="_blank" data-astro-cid-rieiwi5x> Sponsor </a>  <div class="border-[1px] border-foreground dark:border-foreground-dark rounded-full flex justify-center items-center text-foreground dark:text-foreground-dark [&#38;>*:hover]:brightness-75 md:opacity-80 [&#38;>*]:cursor-pointer" data-astro-cid-lgn464si> <button data-theme="theme-auto" aria-label="Auto Theme" title="Set theme to follow system preference" class="theme-button theme-auto" data-astro-cid-lgn464si> <svg width="1em" height="1em" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:brightness-auto">   <symbol id="ai:mdi:brightness-auto" viewBox="0 0 24 24"><path fill="currentColor" d="m14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69L8.69 4H4v4.69L.69 12L4 15.31V20h4.69L12 23.31L15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></symbol><use href="#ai:mdi:brightness-auto"></use>  </svg> </button> <button data-theme="theme-light" aria-label="Light Theme" title="Set theme to light" class="theme-button theme-light" data-astro-cid-lgn464si> <svg width="1em" height="1em" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:white-balance-sunny">   <symbol id="ai:mdi:white-balance-sunny" viewBox="0 0 24 24"><path fill="currentColor" d="m3.55 19.09l1.41 1.41l1.8-1.79l-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6s6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71l1.8 1.79l1.41-1.41l-1.79-1.8M20.45 5l-1.41-1.4l-1.8 1.79l1.42 1.42M13 1h-2v3h2M6.76 5.39L4.96 3.6L3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></symbol><use href="#ai:mdi:white-balance-sunny"></use>  </svg> </button> <button data-theme="theme-dark" aria-label="Dark Theme" title="Set theme to dark" class="theme-button theme-dark" data-astro-cid-lgn464si> <svg width="1em" height="1em" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:moon-and-stars">   <symbol id="ai:mdi:moon-and-stars" viewBox="0 0 24 24"><path fill="currentColor" d="m17.75 4.09l-2.53 1.94l.91 3.06l-2.63-1.81l-2.63 1.81l.91-3.06l-2.53-1.94L12.44 4l1.06-3l1.06 3zm3.5 6.91l-1.64 1.25l.59 1.98l-1.7-1.17l-1.7 1.17l.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85c-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14c.4-.4.82-.76 1.27-1.08c.75-.53 1.93.36 1.85 1.19c-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82c-2.81 3.14-2.7 7.96.31 10.98c3.02 3.01 7.84 3.12 10.98.31"/></symbol><use href="#ai:mdi:moon-and-stars"></use>  </svg> </button> </div>  </div> <button class="md:hidden cursor-pointer" id="nav-open-btn" aria-label="Open navigation menu" title="Open navigation menu"> <svg width="32" height="32" aria-hidden="true" data-icon="mdi:menu">   <symbol id="ai:mdi:menu" viewBox="0 0 24 24"><path fill="currentColor" d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></symbol><use href="#ai:mdi:menu"></use>  </svg> </button> <!-- Mobile nav --> <div class="translate-x-full md:hidden fixed top-0 right-0 bg-background dark:bg-background-dark h-screen w-5/6 px-8 py-6 transition-transform z-40 border-l-[1px] border-background" id="mobile-menu"> <button id="nav-close-btn" class="ml-auto block cursor-pointer" aria-label="Close navigation menu" title="Close navigation menu"> <svg width="32" height="32" aria-hidden="true" data-icon="mdi:close">   <symbol id="ai:mdi:close" viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"/></symbol><use href="#ai:mdi:close"></use>  </svg> </button> <div class="flex flex-col h-full items-start gap-8 pt-16"> <a href="/" class="text-4xl font-light" target="_self" data-astro-cid-rieiwi5x> Blog </a> <a href="https://github.com/sponsors/ghostdogpr" class="text-4xl font-light" target="_blank" data-astro-cid-rieiwi5x> Sponsor </a>  <div class="mt-4 border-[1px] border-foreground dark:border-foreground-dark rounded-full flex justify-center items-center text-foreground dark:text-foreground-dark [&#38;>*:hover]:brightness-75 md:opacity-80 [&#38;>*]:cursor-pointer" data-astro-cid-lgn464si> <button data-theme="theme-auto" aria-label="Auto Theme" title="Set theme to follow system preference" class="theme-button theme-auto" data-astro-cid-lgn464si> <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:brightness-auto">   <use href="#ai:mdi:brightness-auto"></use>  </svg> </button> <button data-theme="theme-light" aria-label="Light Theme" title="Set theme to light" class="theme-button theme-light" data-astro-cid-lgn464si> <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:white-balance-sunny">   <use href="#ai:mdi:white-balance-sunny"></use>  </svg> </button> <button data-theme="theme-dark" aria-label="Dark Theme" title="Set theme to dark" class="theme-button theme-dark" data-astro-cid-lgn464si> <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:moon-and-stars">   <use href="#ai:mdi:moon-and-stars"></use>  </svg> </button> </div>  </div> </div> </div> </nav> <script type="module">function e(){document.querySelector("#mobile-menu")?.classList.toggle("mobile-nav-open")}document.querySelector("#nav-open-btn")?.addEventListener("click",e);document.querySelector("#nav-close-btn")?.addEventListener("click",e);</script> </header> <script>
	function reComputeTheme() {
		if (
			localStorage.theme === 'dark' ||
			(!('theme' in localStorage) &&
				window.matchMedia('(prefers-color-scheme: dark)').matches)
		) {
			document.documentElement.classList.add('dark')
		} else {
			document.documentElement.classList.remove('dark')
		}

		const theme = localStorage.theme || 'auto'
		document
			.querySelectorAll(`[data-theme="theme-${theme}"]`)
			.forEach((el) => el.classList.add('active'))
	}

	function addThemeEventListeners() {
		themeButtons = document.querySelectorAll('.theme-button')
		themeButtons.forEach((button) => {
			button.addEventListener('click', () => {
				themeButtons.forEach((btn) => btn.classList.remove('active'))
				button.classList.add('active')
				if (button.dataset.theme === 'theme-auto') {
					localStorage.removeItem('theme')
					reComputeTheme()
				} else {
					localStorage.theme = button.dataset.theme.replace('theme-', '')
					document.documentElement.classList.toggle(
						'dark',
						button.dataset.theme === 'theme-dark'
					)
				}
			})
		})
	}

	// Set active class on OS theme change
	window
		.matchMedia('(prefers-color-scheme: dark)')
		.addEventListener('change', (_e) => {
			reComputeTheme()
		})

	// run recomputeTheme when screen crosses 768px
	window.matchMedia('(min-width: 768px)').addEventListener('change', (_e) => {
		addThemeEventListeners()
		reComputeTheme()
	})

	reComputeTheme()

	// Run on page load
	window.addEventListener('DOMContentLoaded', () => {
		addThemeEventListeners()
		reComputeTheme()
	})
</script>  <main> <article> <div class="app-container flex flex-col lg:flex-row-reverse justify-between gap-8 py-24 relative"> <div class="md:w-1/4 relative"> <div class="sticky top-0 md:top-28 hidden lg:block"> <div></div> </div> </div> <div class="grow w-full md:max-w-[75ch]"> <div> <h1 class="text-4xl sm:text-5xl leading-snug pt-12 font-bold"> Idiomatic dependency injection for ZIO applications in Scala </h1> <div class="text-lg flex items-center gap-4 flex-wrap py-8"> <!-- Publish date --> <span> <svg width="1em" height="1em" class="inline-block text-primary dark:text-primary-dark" data-icon="mdi:calendar-month-outline">   <symbol id="ai:mdi:calendar-month-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M7 11h2v2H7zm14-6v14c0 1.11-.89 2-2 2H5a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h1V1h2v2h8V1h2v2h1a2 2 0 0 1 2 2M5 7h14V5H5zm14 12V9H5v10zm-4-6v-2h2v2zm-4 0v-2h2v2zm-4 2h2v2H7zm8 2v-2h2v2zm-4 0v-2h2v2z"/></symbol><use href="#ai:mdi:calendar-month-outline"></use>  </svg> <time datetime="2024-11-04T00:00:00.000Z"> 4 Nov 2024 </time> </span> <!-- Updated date -->  <!-- Read time --> <span> <svg width="1em" height="1em" class="inline-block text-primary dark:text-primary-dark" data-icon="mdi:clock-time-four-outline">   <symbol id="ai:mdi:clock-time-four-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 20c4.4 0 8-3.6 8-8s-3.6-8-8-8s-8 3.6-8 8s3.6 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12S6.5 2 12 2m5 11.9l-.7 1.3l-5.3-2.9V7h1.5v4.4z"/></symbol><use href="#ai:mdi:clock-time-four-outline"></use>  </svg> 10 min read </span> </div>  <img src="/_astro/cover.uCud6lgp_3tDtT.webp" alt="Idiomatic dependency injection for ZIO applications in Scala" loading="lazy" decoding="async" fetchpriority="auto" width="853" height="480" class="rounded-lg mb-8">  </div> <div class="prose prose-neutral prose-lg md:prose-xl dark:prose-invert prose-img:rounded-xl prose-figure:text-center prose-img:mx-auto">  <p>I often hear online in Scala-related discussions that <code>ZLayer</code> is “too complex” or “unnecessary”. Those statements couldn’t be more different from my own experience: I think <code>ZLayer</code> is an incredible lifesaver! While it is true that it had some issues in earlier versions of ZIO (those who remember the <code>Has</code> datatype know what I’m talking about!), a number of major improvements have been made since. In this article, I will show idiomatic usage of <code>ZLayer</code> for dependency injection and hope to demonstrate how it allows doing complex things in a very simple way.</p>
<p>Note: I have been working with ZIO applications for many years (before 1.0!) and I am currently working on the backend of a large online multiplayer game, entirely written in Scala and using ZIO. The examples in this article are inspired by that codebase.</p>
<h3 id="a-typical-service-definition">A typical service definition</h3>
<p>Let’s start with a simple service. The game I’m working on allows users to chat with each other. To prevent them from using offensive words, each chat message is sent to an external service (called <code>WordFilter</code>) that will mask the banned parts.</p>
<p>To implement this, we start by creating an <strong>interface</strong> (a trait in Scala). Programming to interfaces is a good practice that has many benefits. Separation of concerns makes your code easier to understand and maintain: you’re not mixing your business logic with unrelated concerns such as database access or API calls. Changing a backend service or provider will only affect a given interface implementation and not the rest of the code. Another obvious benefit is testability, as you are able to provide a different implementation of the interface for testing.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">trait</span><span style="color:#B392F0"> WordFilter</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> maskChat</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">msg</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">language</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">Option</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Language</span><span style="color:#E1E4E8">])</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Task</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Our interface <code>WordFilter</code> has a single method <code>maskChat</code> that takes a message and an optional language and returns a new message. The <code>Task</code> return type implies that the method may have side effects or may fail with an <code>Exception</code>.</p>
<p>Now let’s work on the implementation. We want to call our external service, which is a simple REST API. We need two things: the URL of that service and an HTTP client. For that, we are going to use the library <a href="https://github.com/softwaremill/sttp">sttp</a>.</p>
<p>Our service has two “dependencies,” which we can define as follows:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> SttpClient</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> sttp.client3.</span><span style="color:#B392F0">SttpBackend</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Task</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Any</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">case</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> WordFilterConfig</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">)</span></span></code></pre>
<p>The idiomatic way to create our service implementation is to create a <code>class</code> extending the interface with all our dependencies as parameters.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> WordFilterLive</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">config</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">WordFilterConfig</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">sttp</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">SttpClient</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    extends</span><span style="color:#B392F0"> WordFilter</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> maskChat</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">msg</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">language</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">Option</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Language</span><span style="color:#E1E4E8">])</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Task</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#F97583">    ???</span><span style="color:#6A737D"> // the implementation itself is not important here</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>An important thing to note is that using the ZIO environment for dependencies by making <code>maskChat</code> return <code>RIO[WordFilterConfig &#x26; SttpClient, String]</code> is an <strong>anti-pattern</strong> and should be avoided. By doing this, you are “leaking” your dependency to the rest of the code and making it less readable, breaking the separation of concerns. Worse, these dependencies might change in the future (e.g., if we switch sttp with something else), and it will cause a lot of changes to update all usages. The ZIO environment should only be used for <strong>contextual information</strong> which is eliminated at some boundary (user context, transaction context, etc.). If your dependency always has the same value for the lifespan of the application, move it to your service class.</p>
<p>When testing, we don’t want to hit our actual service; we simply want to return the original message. For that, we can create another service implementation which does not require any dependency.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> WordFilterTest</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> WordFilter</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> maskChat</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">msg</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">language</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">Option</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Language</span><span style="color:#E1E4E8">])</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Task</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">    ZIO</span><span style="color:#E1E4E8">.succeed(msg)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>If we used the anti-pattern mentioned above, we would have to provide a configuration value and an sttp client even when using the test implementation, which would be unfortunate. <strong>Dependencies are tied to the implementation, not the interface.</strong></p>
<p>So far, we’ve just used Scala standard practices. Why do we need <code>ZLayer</code> then? It is useful for <em>constructing</em> services and <em>combining</em> them together.</p>
<h3 id="building-the-service">Building the service</h3>
<p>To build our <code>WordFilterLive</code>, we need the sttp backend and our configuration value. First, let’s talk about the sttp backend. We could create a new one when we construct <code>WordFilterLive</code>; however, we might have other services needing it, and it is recommended to have a single backend instance for the whole application. So we are going to get it using <code>ZIO.service</code> instead. This operation will be done inside a <code>ZLayer</code> so that it is done once when constructing our services.</p>
<p>For <code>WordFilterConfig</code>, we don’t need to use the environment: instead, we can simply use <code>ZIO.config</code>, which will look for a <code>given</code> <code>Config[WordFilterConfig]</code> in scope (an <code>implicit</code> with Scala 2). The <code>Config</code> typeclass defines which config keys to read and how to parse the values. You can define this <code>given</code> manually, but also derive it automatically using <code>deriveConfig</code>. In our case, we use environment variables to configure our application, so we use the <code>@name</code> annotation together with <code>deriveConfig</code> to define the corresponding environment variable and parse it into a <code>String</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#B392F0"> zio</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">config</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">derivation</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">name</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#B392F0"> zio</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">config</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">magnolia</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">deriveConfig</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">case</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> WordFilterConfig</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">  @</span><span style="color:#E1E4E8">name(</span><span style="color:#9ECBFF">"WORDFILTER_URL"</span><span style="color:#E1E4E8">) </span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">object</span><span style="color:#B392F0"> WordFilterConfig</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  given</span><span style="color:#B392F0"> Config</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">WordFilterConfig</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> deriveConfig[</span><span style="color:#B392F0">WordFilterConfig</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>This code means that when trying to access <code>WordFilterConfig</code>, the application will look at the key <code>WORDFILTER_URL</code> inside the configuration key-value map, parse it into a <code>String</code>, and construct an instance of <code>WordFilterConfig</code> with that value for <code>url</code>.</p>
<p>Here’s our layer definition:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">val</span><span style="color:#FFAB70"> live</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ZLayer</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">SttpClient</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">WordFilter</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">  ZLayer</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      config </span><span style="color:#F97583">&#x3C;-</span><span style="color:#B392F0"> ZIO</span><span style="color:#E1E4E8">.config[</span><span style="color:#B392F0">WordFilterConfig</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">      sttp   </span><span style="color:#F97583">&#x3C;-</span><span style="color:#B392F0"> ZIO</span><span style="color:#E1E4E8">.service[</span><span style="color:#B392F0">SttpClient</span><span style="color:#E1E4E8">] </span><span style="color:#6A737D">// requires a SttpClient</span></span>
<span class="line"><span style="color:#E1E4E8">    } </span><span style="color:#F97583">yield</span><span style="color:#B392F0"> WordFilterLive</span><span style="color:#E1E4E8">(config, sttp)</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span></code></pre>
<p>The inner for-comprehension returns a <code>ZIO[SttpClient, Nothing, WordFilter]</code>, but we wrap it inside <code>ZLayer</code> to change the type from <code>ZIO</code> to <code>ZLayer</code>. We will see why in a moment.</p>
<p>What if our service required a dozen other services and configuration classes? Wouldn’t it be a bit tedious to write that code? It would, and in fact, we don’t need to write it at all! Instead, we can just call <code>ZLayer.derive</code> as shown below (I also included the layer for the test implementation):</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">val</span><span style="color:#FFAB70"> live</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ZLayer</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">SttpClient</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">WordFilter</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">  ZLayer</span><span style="color:#E1E4E8">.derive[</span><span style="color:#B392F0">WordFilterLive</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">val</span><span style="color:#FFAB70"> test</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ZLayer</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Any</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">WordFilter</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">  ZLayer</span><span style="color:#E1E4E8">.derive[</span><span style="color:#B392F0">WordFilterTest</span><span style="color:#E1E4E8">]</span></span></code></pre>
<p>This code will do exactly the same thing as the code we wrote earlier. It uses a macro that first checks the fields needed to build a <code>WordFilterLive</code>. Then, for each field type, it checks if there is a <code>given</code> <code>Config</code> for it in scope. If a <code>Config</code> is found, it will call <code>ZIO.config</code> to get that value; otherwise, it will call <code>ZIO.service</code> and the result <code>ZLayer</code> will require that service. In the end, the macro will generate code that matches the one created manually.</p>
<p>Now, what if our service construction required additional values, such as a <code>Queue</code> or a <code>Hub</code>? <code>ZLayer.derive</code> can handle that too (it will use the <code>unbounded</code> constructors). What if we needed a type that is not handled out of the box, such as a <code>RateLimiter</code> or a <code>Cache</code>? For that, you can define a <code>given</code> instance of <code>ZLayer.Derive.Default</code> that describes how to create a value for your type, and it will be used by the <code>ZLayer.derive</code> macro.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">case</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MyService</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#FFAB70">  config</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">MyConfig</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">  anotherService</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">AnotherService</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">  rateLimiter</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">RateLimiter</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">given</span><span style="color:#B392F0"> ZLayer</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">Derive</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">Default</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">WithContext</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Any</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">RateLimiter</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">  ZLayer</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">Derive</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">Default</span><span style="color:#E1E4E8">.fromZIO(</span><span style="color:#B392F0">RateLimiter</span><span style="color:#E1E4E8">.make)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">val</span><span style="color:#FFAB70"> live</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ZLayer</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">AnotherService</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">MyService</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">  ZLayer</span><span style="color:#E1E4E8">.derive[</span><span style="color:#B392F0">MyService</span><span style="color:#E1E4E8">] </span><span style="color:#6A737D">// will run RateLimiter.make</span></span></code></pre>
<p>Of course, you can always write the layer construction manually, especially if you have a lot of custom logic to execute. But in most cases, <code>derive</code> allows you to do the job much more succinctly.</p>
<h3 id="providing-the-service">Providing the service</h3>
<p>We have a <code>ZLayer</code> for our <code>WordFilter</code> service. How do we use it? To understand it better, let’s add two services to our application: first, we have <code>ChatService</code>, which exposes the <code>chat</code> API and will use the <code>WordFilter</code> dependency in its implementation. Finally, we have <code>GrpcServer</code>, which exposes all our services to clients on a given port. It has a <code>start</code> method that starts the server and waits until the application is interrupted (hence the <code>Nothing</code> return type).</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> ChatService</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">wordFilter</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">WordFilter</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> chat</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">message</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Task</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Unit</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> ???</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">object</span><span style="color:#B392F0"> ChatService</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  val</span><span style="color:#FFAB70"> live</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ZLayer</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">WordFilter</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">ChatService</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">    ZLayer</span><span style="color:#E1E4E8">.derive[</span><span style="color:#B392F0">ChatService</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> GrpcServer</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">chatService</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">ChatService</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> start</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Task</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> ???</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">object</span><span style="color:#B392F0"> GrpcServer</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  val</span><span style="color:#FFAB70"> live</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ZLayer</span><span style="color:#E1E4E8">[</span><span style="color:#B392F0">ChatService</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Nothing</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">GrpcServer</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">    ZLayer</span><span style="color:#E1E4E8">.derive[</span><span style="color:#B392F0">GrpcServer</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Nothing fancy, we just reused the same pattern as before (I didn’t use a <code>trait</code> for simplicity; normally, I use a trait for everything except the top layer).</p>
<p>Now let’s look at our main function (the <code>run</code> function in ZIO apps). The main thing we want to do there is start <code>GrpcServer</code>. We will use <code>ZIO.serviceWithZIO</code> to access <code>GrpcServer</code> from the ZIO environment and call the <code>start</code> function.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">object</span><span style="color:#B392F0"> App</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> ZIOAppDefault</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  val</span><span style="color:#FFAB70"> run</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> ZIO</span><span style="color:#E1E4E8">.serviceWithZIO[</span><span style="color:#B392F0">GrpcServer</span><span style="color:#E1E4E8">](_.start)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>If we only do that, we will get a compile error:</p>
<figure class="rehype-figure-title"><img  loading="lazy" decoding="async" fetchpriority="auto" width="1122" height="370" src="/_astro/image-1.8JF0z11j_2tRIu1.webp" ></figure>
<p>That is because we need to tell the program how to build a <code>GrpcServer</code>. If you are familiar with ZIO, you know this is done by calling the <code>.provide</code> method and pass a <code>ZLayer</code> as parameter. Let’s try it:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">val</span><span style="color:#FFAB70"> run</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">  ZIO</span></span>
<span class="line"><span style="color:#E1E4E8">    .serviceWithZIO[</span><span style="color:#B392F0">GrpcServer</span><span style="color:#E1E4E8">](_.start)</span></span>
<span class="line"><span style="color:#E1E4E8">    .provide(</span><span style="color:#B392F0">GrpcServer</span><span style="color:#E1E4E8">.live)</span></span></code></pre>
<p>Now we get another error:</p>
<figure class="rehype-figure-title"><img  loading="lazy" decoding="async" fetchpriority="auto" width="1122" height="232" src="/_astro/image-2.1MhmJU3C_ZF4hck.webp" ></figure>
<p>The error is very self-explanatory: we provided a <code>GrpcServer</code>, but this layer (<code>GrpcServer.live</code>) itself requires a <code>ChatService</code>, so we need to provide it too. And so on until all our dependencies are provided, which in our case is as follows:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">  val</span><span style="color:#FFAB70"> run</span><span style="color:#F97583"> =</span></span>
<span class="line"><span style="color:#B392F0">    ZIO</span></span>
<span class="line"><span style="color:#E1E4E8">      .serviceWithZIO[</span><span style="color:#B392F0">GrpcServer</span><span style="color:#E1E4E8">](_.start)</span></span>
<span class="line"><span style="color:#E1E4E8">      .provide(</span></span>
<span class="line"><span style="color:#B392F0">        GrpcServer</span><span style="color:#E1E4E8">.live,</span></span>
<span class="line"><span style="color:#B392F0">        ChatService</span><span style="color:#E1E4E8">.live,</span></span>
<span class="line"><span style="color:#B392F0">        WordFilter</span><span style="color:#E1E4E8">.live,</span></span>
<span class="line"><span style="color:#B392F0">        HttpClientZioBackend</span><span style="color:#E1E4E8">.layer() </span><span style="color:#6A737D">// creates a SttpClient</span></span>
<span class="line"><span style="color:#E1E4E8">      )</span></span></code></pre>
<p>It compiles! And we can run our application successfully.</p>
<p>Let’s now say we want a test app where we are not using the real <code>WordFilter</code> API, so let’s replace <code>WordFilter.live</code> with <code>WordFilter.test</code>. It compiles, but we get a warning:</p>
<figure class="rehype-figure-title"><img  loading="lazy" decoding="async" fetchpriority="auto" width="1122" height="222" src="/_astro/image-3.CtuUnAh-_Z2pQ25q.webp" ></figure>
<p>Since we don’t use the real API, we don’t need the HTTP client anymore, so we don’t need the sttp layer or the configuration environment variable at runtime.</p>
<p>What if we provided both <code>live</code> and <code>test</code>?</p>
<figure class="rehype-figure-title"><img  loading="lazy" decoding="async" fetchpriority="auto" width="1122" height="278" src="/_astro/image-4.8yhy7oFJ_Z1McvRp.webp" ></figure>
<p>Once again, the error message is very clear.</p>
<p>The beauty of <code>ZLayer</code> is that we don’t need to plug things together manually. The <code>provide</code> macro will look at all the types necessary and <strong>build a tree of dependencies at compile time</strong>. Any anomaly will cause a compile error: a missing dependency, an unnecessary dependency, a dependency cycle… Error messages are great, as we saw above, and will tell you exactly what the problem is.</p>
<p>Once it compiles, you know there won’t be any surprises at runtime: the tree will be executed from top to bottom, with independent services being created in parallel. Any service that is used in multiple places will be created only once (unless you explicitly specify that you want different ones using the <code>fresh</code> method on layers).</p>
<h3 id="conclusion">Conclusion</h3>
<p>As we’ve seen, there is nothing overly complicated with <code>ZLayer</code>, especially if you are already familiar with <code>ZIO</code>. There is a single pattern to follow: declaring your services as classes containing the other services that they may use. Once you have that, use <code>ZLayer.derive</code> to create the appropriate <code>ZLayer</code> values (in most cases, it will be a one-liner). Finally, provide all your layers in a big, flat list and let the compiler do the work for you and tell you if you missed something. That’s it!</p>
<p>I have been using this pattern in multiple applications, some very large with hundreds of services and it has been working beautifully.</p>
<p>The whole code of this example is available <a href="https://gist.github.com/ghostdogpr/ff2e394c4948fd15aa9d5f29795c2528">in this Gist</a> and you can run it with the following command: <code>export WORDFILTER_URL="???" &#x26;&#x26; scala run .</code>.</p>  </div> </div> </div> </article> </main>  <footer> <div class="app-container grid md:grid-cols-3 gap-12 py-16 border-t-2 border-foreground/50 dark:border-foreground-dark/50"> <div> <a href="/" class="block w-fit" aria-label="Home"> <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
  <rect width="36" height="36" rx="8" fill="currentColor" opacity="0.1" />
  <text x="18" y="25" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="700" fill="currentColor" text-anchor="middle">PR</text>
</svg> </a> </div> <div> <h3 class="font-semibold text-2xl">Links</h3> <div class="flex flex-wrap gap-4 mt-4"> <a class="text-lg" href target="_blank" rel="noopener noreferrer"> Blog </a><a class="text-lg" href="https://github.com/sponsors/ghostdogpr" target="_blank" rel="noopener noreferrer"> Sponsor </a> <a href="/rss.xml" target="_blank" rel="noopener noreferrer" class="text-lg" aria-label="RSS Feed"> <svg width="1em" height="1em" class="w-6 h-6" data-icon="mdi:rss">   <symbol id="ai:mdi:rss" viewBox="0 0 24 24"><path fill="currentColor" d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27zm0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93z"/></symbol><use href="#ai:mdi:rss"></use>  </svg> </a> </div> </div> <div> <h3 class="font-semibold text-2xl">Socials</h3> <div class="flex flex-wrap gap-4 mt-4"> <a class="text-lg" href="https://github.com/ghostdogpr" target="_blank" rel="noopener noreferrer"> GitHub </a><a class="text-lg" href="https://www.linkedin.com/in/pierrericadat/" target="_blank" rel="noopener noreferrer"> LinkedIn </a><a class="text-lg" href="https://twitter.com/ghostdogpr" target="_blank" rel="noopener noreferrer"> X / Twitter </a> </div> </div> </div> <div class="app-container flex justify-between items-center pb-6 text-center"> <p class="text-left md:text-center w-full">
Theme: <a class="underline" href="https://github.com/yashjawale/saral-theme-astro" target="_blank">Saral</a> </p> </div> </footer> </body></html>